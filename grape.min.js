/*!
    Grape.js JavaScript game engine
    (c) 2012-2014 Zoltan Mihalyi.
 https://github.com/zoltan-mihalyi/grape/blob/master/MIT-LICENSE.txt
 */
!function(a){var b=a("undefined"!=typeof require?require:null);"object"==typeof module&&"object"==typeof module.exports?module.exports=b:this.Grape=b,"function"==typeof define&&define.amd&&define([],function(){return b})}(function(a){var b,c;return function(){"use strict";var a="[object String]",d={},e={},f=Object.prototype.hasOwnProperty,g=function(a,b){return f.call(a,b)};c=function(a,b,c){if(g(d,a)||g(e,a))throw new Error("Already defined: "+a);e[a]=[b,c]};var h=function(a){var b,c,f,i;if(!g(d,a)&&g(e,a)){for(b=e[a],c=b[0],f=[],i=0;i<c.length;++i)h(c[i]),f[i]=d[c[i]];d[a]=b[1].apply({},f)}};b=function(b,c){var e=0,f,g=[],i=function(){return this}();for(Object.prototype.toString.call(b)===a&&(b=[b]),f=b.length;f>e;++e)h(b[e]),g[e]=d[b[e]];return c?void c.apply(i,g):d[b[0]]}}(),c("m1",[],function(){return{browser:"undefined"!=typeof window,node:"object"==typeof process&&"object"==typeof process.env}}),c("m2",["m1"],function(a){var b=Object.prototype.toString,c,d,e;return a.browser&&("function"==typeof window.addEventListener?(c=function(a,b,c){a.addEventListener(b,c,!1)},d=function(a,b,c){a.removeEventListener(b,c,!1)}):document.attachEvent&&(c=function(a,b,c){a.attachEvent("on"+b,c)},d=function(a,b,c){a.detachEvent("on"+b,c)}),document.documentElement.contains?e=function(a,b){return 9!==b.nodeType&&a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition&&(e=function(a,b){return!!(a.compareDocumentPosition(b)+0&16)})),{isArray:function(a){return"[object Array]"===b.call(a)},isFunction:function(a){return"[object Function]"===b.call(a)},extend:function(a,b){var c;for(c in b)a[c]=b[c]},removeFromArray:function(a,b){var c=a.indexOf(b);return-1!==c?(a.splice(c,1),!0):!1},arrayContains:function(a,b){return-1!==a.indexOf(b)},ajax:function(a,b,c,d){"function"==typeof b&&(d=c,c=b,b={});var e=new XMLHttpRequest;e.onload=function(){c("blob"!==e.responseType&&"arraybuffer"!==e.responseType||void 0===e.response?e.responseText:e.response)},e.onerror=function(){d()},e.open("get",a,void 0===b.async?!0:b.async),b.responseType&&(e.responseType=b.responseType),e.send()},parseJSON:function(a){return JSON.parse(a)},addEventListener:c,removeEventListener:d,domContains:e}}),c("m3",["m2"],function(a){var b=0,c={},d={"extends":function(a){return!!this.allParentId[a.id]},extend:function(a,b){return"string"==typeof a?b?g(a,this,b):g(a,this):a?g(this,a):g(this)}},e={instanceOf:function(a){return this instanceof a||!!this.getClass().allParentId[a.id]},parent:function(b,c){if(!this.instanceOf(b))throw new Error("Accessing parent member of not inherited class");var d=b.prototype[c],e=this;return a.isFunction(d)?function(){return d.apply(e,arguments)}:d},getClass:function(){return this.constructor}};function f(){}function g(c,f,g){var o={},p,q,r=++b;for(q=0;q<arguments.length;q++)if("undefined"==typeof arguments[q])throw new Error("Argument is undefined: "+q);"string"!=typeof c&&(g=f,f=c,c="Class #"+r),a.isArray(f)||(a.isFunction(f)?f=[f]:(g=f,f=[])),g||(g={}),o.className=c,o.id=r;for(q in d)o[q]=d[q];h(o,f),i(o,g),k(o),m(o),n(o),j(o),l(o),p=o.constructor;for(q in o.methods){if(e.hasOwnProperty(q))throw new Error('The method name "'+q+'" is reserved');p.prototype[q]=o.methods[q]}for(q in o)p[q]=o[q];for(q in e)p.prototype[q]=e[q];return p.prototype.init=p,p.toString=function(){return c},p.prototype.constructor=p,p}function h(a,b){var c;for(a.parents=b,a.allParent=p(b),a.allParentId={},c=0;c<a.allParent.length;c++)a.allParentId[a.allParent[c].id]=!0}function i(a,b){var c={},d;for(d in b)c[d]=o(d,b[d],a);a.methodDescriptors=c,a.methods={},a.ownMethods={},a.init=null}function j(a){var b=a.className,c=[],d=[],e,f,g;for(e=0;e<a.allParent.length;e++)f=a.allParent[e],f.init&&c.push(f.init);for(a.init&&c.push(a.init),e=0;e<c.length;e++)d.push("var init"+e+" = inits["+e+"];");for(d.push('this["'+b+'"] = function(){'),e=0;e<c.length;e++)d.push("init"+e+".apply(this, arguments);");d.push("};"),d.push('return this["'+b+'"];'),g=new Function("inits",d.join("\n")).call({},c),a.constructor=g}function k(a){var b;for(b in c)(c[b].onInit||f)(a)}function l(a){var b;for(b in c)(c[b].onFinish||f)(a)}function m(a){for(var b=0,c=a.allParent,d=c.length,e,f;d>b;b++){e=c[b];for(f in e.ownMethods)a.methods[f]=e.ownMethods[f]}}function n(a){var b,d=a.methodDescriptors,e,f,g,h,i,j;for(b in d)if(e=d[b],e.init)a.init=e.method;else{for(f=e.modifiers,j=!0,g=0;g<f.length;g++){if(i=f[g],!c[i])throw new Error('Unknown modifier "'+i+'"');for(h=g+1;h<f.length;h++){if(i===f[h])throw new Error('Modifier "'+i+'" duplicated.');if(!c[i].matches[f[h]])throw new Error('Modifier "'+i+'" cannot use with "'+f[h]+'".')}c[i].onAdd(a,e)===!1&&(j=!1)}j&&(a.methods[e.name]=e.method,a.ownMethods[e.name]=e.method)}}function o(a,b,c){var d=a.split(" "),e=d.slice(0,-1),f=d.slice(-1)[0],g={},h=!1,i;if("init"===f&&(h=!0,0!==e.length))throw new Error("init method cannot be marked with any modifiers.");for(i=e.length-1;i>=0;i--)g[e[i]]=!0;return{modifiers:e,is:g,name:f,method:b,source:c,init:h}}function p(a,b,c){var d,e=a.length,f;if(!b){for(b={},d=0;e>d;d++){if(f=a[d],!f)throw new Error("Parent #"+(d+1)+" is "+f+".");b[f.id]=!0}c={list:[],set:{}}}for(d=0;e>d;d++)if(f=a[d],c.set[f.id]){if(b[f.id])throw new Error('Class "'+f.className+'" is set as parent twice, or implied by a parent class')}else p(f.parents,b,c),c.list.push(f),c.set[f.id]=!0;return c.list}function q(a,b){if(c[a])throw new Error('keyword "'+a+'" already registered');b.matches={},c[a]=b}function r(a,b){c[a].matches[b]=!0,c[b].matches[a]=!0}return q("static",{onAdd:function(a,b){if(a[b.name]||d[b.name])throw new Error('Static method "'+b.name+'" hides a reserved attribute.');return a[b.name]=b.method,!1}}),q("override",{onAdd:function(a,b){var c,d,e;if(!a.methods[b.name]){for(c=0;c<a.allParent.length;++c){e=a.allParent[c];for(d in e.abstracts)if(d===b.name)return}throw new Error('Method "'+b.name+'" does not override a method from its superclass')}}}),q("abstract",{onInit:function(a){a.abstracts={},a.isAbstract=!1},onAdd:function(a,b){if(a.abstracts[b.name]=b.method,a.isAbstract=!0,a.methods[b.name])throw new Error('Method "'+b.name+'" cannot be abstract, because it is inherited from a parent.');return!1},onFinish:function(a){var b,c,d,e;for(a.isAbstract&&(e=a.constructor.toString,a.constructor=function(){throw new Error('Abstract class "'+a.className+'" cannot be instantiated.')},a.constructor.toString=e,a.constructor.prototype.constructor=a.constructor),b=0;b<a.allParent.length;++b){d=a.allParent[b];for(c in d.abstracts)if(!a.methods[c]&&void 0===a.abstracts[c])throw new Error('Method "'+c+'" is not implemented, inherited, or marked abstract')}}}),q("final",{onInit:function(a){var b,c,d,e={};for(c=0;c<a.allParent.length;++c){b=a.allParent[c];for(d in b.methods)if(e.hasOwnProperty(d)&&e[d]!==b.methods[d])throw new Error('Method "'+d+'" is final and cannot be overridden by inheriting from "'+b.className+'"');for(d in b.finals)e[d]=b.finals[d]}a.parentFinals=e,a.finals={}},onAdd:function(a,b){a.finals[b.name]=b.method},onFinish:function(a){var b;for(b in a.parentFinals)if(a.methods[b]!==a.parentFinals[b])throw new Error('Overriding final method "'+b+'"')}}),r("final","override"),g.registerKeyword=q,g.registerKeywordMatching=r,g}),c("m4",["m3"],function(a){var b=["slice","filter","map"],c=Array.prototype.slice,d=Array.prototype.splice,e,f,g,h;for(e={call:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0,d=this.length;d>c;++c)this[c][a].apply(this[c],b);return this},apply:function(a,b){for(var c=0,d=this.length;d>c;++c)this[c][a].apply(this[c],b);return this},isEmpty:function(){return 0===this.length},toArray:function(){return c.call(this,0)},attr:function(a,b){for(var c=0,d=this.length;d>c;++c)this[c][a]=b;return this},eq:function(a){var b=new(this.getClass());return this.length>a&&b.push(this[a]),b},get:function(a){return this[a]},one:function(){return this[0]},random:function(a){var b;if(void 0===a)return this[Math.random()*this.length>>0];b=this.clone();while(b.length>a)b.splice(Math.random()*b.length>>0,1);return b},clone:function(){return this.slice(0)},size:function(){return this.length}},f=Object.getOwnPropertyNames?Object.getOwnPropertyNames(Array.prototype):["concat","constructor","indexOf","join","pop","push","reverse","shift","slice","splice","sort","toString","unshift","valueOf"],g=f.length-1;g>=0;g--)e[f[g]]=Array.prototype[f[g]];function i(a){return function(){var b=new(this.getClass()),c=a.apply(this,arguments);return c.splice(0,0,0,0),d.apply(b,c),b}}for(g=b.length-1;g>=0;g--)h=e[b[g]],e[b[g]]=i(h);return a("Array",e)}),c("m5",["m3","m4"],function(a,b){return a("Bag",b,{add:b.prototype.push,remove:function(a){return a!==this.length-1?this[a]=this.pop():void this.pop()}})}),c("m6",["m4","m5"],function(a,b){return{Array:a,Bag:b}}),c("m7",["m3"],function(a){return a("AABB",{"abstract getBounds":null,"abstract getLeft":null,"abstract getTop":null,"abstract getRight":null,"abstract getBottom":null,"abstract getWidth":null,"abstract getHeight":null})}),c("m8",["m3"],function(a){var b;function c(a,b,d){var e;if("object"==typeof a)for(e in a)c(a[e],b,d+"."+e);else b[d]=a}return a.registerKeyword("event",{onInit:function(a){a.events={},a.allEvent={}},onAdd:function(a,d){if(!a.extends(b))throw new Error('To use "event" keyword, inherit the Grape.EventEmitter class!');return c(d.method,a.events,d.name),!1},onFinish:function(a){var b,c,d;for(b=0;b<a.allParent.length;b++){d=a.allParent[b].events;for(c in d)(a.allEvent[c]||(a.allEvent[c]=[])).push(d[c])}d=a.events;for(c in d)(a.allEvent[c]||(a.allEvent[c]=[])).push(d[c])}}),b=a("EventEmitter",{init:function(){var a,b=this.getClass();this._events={};for(a in b.allEvent)this._events[a]=b.allEvent[a].slice(0)},on:function(a,b){(this._events[a]||(this._events[a]=[])).push(b)},off:function(a,b){var c,d=this._events[a];for(c=0;c<d.length;c++)d[c]===b&&(d.splice(c,1),c--)},emit:function(a,b){var c,d=this._events[a],e;if(d)for(c=0,e=d.length;e>c;c++)d[c].call(this,b);if(d=this._events.any)for(c=0,e=d.length;e>c;c++)d[c].call(this,a,b)},"static decompose":c})}),c("m9",["m3","m5"],function(a,b){var c=a("TagContainer",{init:function(){this._tags={}},get:function(a){var b,c,d=this.createResultContainer();if(c=this._tags[a])for(b=c.length-1;b>=0;b--)d.push(c[b]);return d},_getTag:function(a){return this._tags[a]||this.createResultContainer()},createResultContainer:function(){return[]},"final _add":function(a,c){var d=this._tags,e=d[c];return e||(e=d[c]=new b),e.add(a)-1},"final _remove":function(a,b){var c=a._tags[b],d=this._tags[b],e=d.remove(c);e&&(e._tags[b]=c),0===d.length&&delete this._tags[b]}}),d=a("TagContainer",{init:function(){this._tags={}},setTagContainer:function(a){var b;if(this._tagContainer){if(this._tagContainer===a)return;this.removeTagContainer()}this._tagContainer=a;for(b in this._tags)a._add(this,b)},addTag:function(a){var b=this._tagContainer;return this.hasTag(a)?!1:(this._tags[a]=b?b._add(this,a):!0,!0)},hasTag:function(a){return void 0!==this._tags[a]},removeTag:function(a){this.hasTag(a)&&(this._tagContainer&&this._tagContainer._remove(this,a),delete this._tags[a])},removeTagContainer:function(){var a;if(this._tagContainer)for(a in this._tags)this._tagContainer._remove(this,a)}});return{TagContainer:c,Taggable:d}}),c("ma",["m3","m5","m8","m9"],function(a,b,c,d){var e;a.registerKeyword("global-event",{onInit:function(a){a.globalEvents={},a.allGlobalEvent={}},onAdd:function(a,b){if(!a.allParentId[e.id])throw new Error('To use "global-event" keyword, inherit the Grape.GameObject class!');return c.decompose(b.method,a.globalEvents,b.name),!1},onFinish:function(a){var b,c,d;for(b=0;b<a.allParent.length;b++){d=a.allParent[b].globalEvents;for(c in d)(a.allGlobalEvent[c]||(a.allGlobalEvent[c]=[])).push(d[c])}d=a.globalEvents;for(c in d)(a.allGlobalEvent[c]||(a.allGlobalEvent[c]=[])).push(d[c])}});function f(a,b,c){var d=function(b){c.call(a,b)};a._layer.on(b,d),a.on("remove",function(){this._layer.off(b,d)})}return e=a("GameObject",[c,d.Taggable],{init:function(){this._layer=null,this.on("add",function(){var a=this.getClass(),b,c;for(b in a.allGlobalEvent){c=a.allGlobalEvent[b];for(var d=0;d<c.length;d++)f(this,b,c[d])}})},onGlobal:function(a,b){var c=this,d=function(a){b.call(c,a)};this._layer?this._layer.on(a,d):this.on("add",function(){this._layer.on(a,d)}),this.on("remove",function(){this._layer.off(a,d)})},"final remove":function(){this._layer.remove(this)},getGame:function(){return null===this._layer?null:this._layer.getGame()},getScene:function(){return null===this._layer?null:this._layer.getScene()},getLayer:function(){return this._layer}})}),c("mb",["m3","ma"],function(a,b){return a("Alarm",b,{init:function(){this._alarms={}},"final setAlarm":function(a,b){this._alarms[a]=b},"final getAlarm":function(a){return this._alarms[a]},"final increaseAlarm":function(a,b){this._alarms[a]?this._alarms[a]+=b:this._alarms[a]=b},"final hasAlarm":function(a){return void 0!==this._alarms[a]},"global-event frame":function(){var a;for(a in this._alarms)--this._alarms[a]<=0&&(delete this._alarms[a],this.emit("alarm",a),this.emit("alarm."+a))}})}),c("mc",["m3"],function(a){return a("Position",{init:function(a){a=a||{},this.x=a.x||0,this.y=a.y||0}})}),c("md",["m3","m7","mc","ma"],function(a,b,c,d){return a("Visualizer",[d,c,b],{init:function(a){a=a||{},this.alpha=void 0===a.alpha?1:a.alpha,this.visible=void 0===a.visible?!0:a.visible},"global-event render":function(a){this.visible&&(a.globalAlpha=this.alpha,this.visualize(a),a.globalAlpha=1)},"abstract visualize":null,"abstract getBounds":null,"abstract getLeft":null,"abstract getTop":null,"abstract getRight":null,"abstract getBottom":null,"abstract getWidth":null,"abstract getHeight":null})}),c("me",["m3","md"],function(a,b){return a("SpriteVisualizer",b,{init:function(a){a=a||{},this.subimage=a.subimage||0,this.sprite=a.sprite},"override visualize":function(a){var b=this.sprite;b&&b.img?a.drawImage(b.img,b.left+b.width*(Math.round(this.subimage)%b.subimages),b.top,b.width,b.height,this.x-b.originX,this.y-b.originY,b.width,b.height):(a.fillStyle="black",a.fillRect(this.x,this.y,32,32),a.fillStyle="white",a.font="20px Arial",a.fillText("?",this.x+11,this.y+24))},"override getBounds":function(){var a=this.sprite,b=this.x-a.originX,c=this.y-a.originY;return{left:b+a.leftBounding,top:c+a.topBounding,right:b+a.rightBounding,bottom:c+a.bottomBounding}},"override getLeft":function(){return this.x-this.sprite.originX+this.sprite.leftBounding},"override getTop":function(){return this.y-this.sprite.originY+this.sprite.topBounding},"override getRight":function(){return this.x-this.sprite.originX+this.sprite.rightBounding},"override getBottom":function(){return this.y-this.sprite.originY+this.sprite.bottomBounding},"override getWidth":function(){return this.sprite.rightBounding-this.sprite.leftBounding},"override getHeight":function(){return this.sprite.bottomBounding-this.sprite.topBounding}})}),c("mf",["m3","me"],function(a,b){return a("Animation",b,{init:function(a){a=a||{},this.imageSpeed=void 0===a.imageSpeed?1:a.imageSpeed},"global-event frame":function(){if(this.sprite){var a=this.sprite.subimages,b=this.subimage+this.imageSpeed;b>=a||0>b?(this.subimage=b%a,this.subimage<0&&(this.subimage+=a),this.emit("animationEnd")):this.subimage=b}}})}),c("mg",["m3"],function(a){return a.registerKeyword("chainable",{onAdd:function(a,b){var c;c=b.method,b.method=function(){return c.apply(this,arguments),this},b.is.final&&(a.finals[b.name]=b.method)}}),a.registerKeywordMatching("chainable","final"),a.registerKeywordMatching("chainable","override"),null}),c("mh",["m3","m8"],function(a,b){return a("System",b,{"final getLayer":function(){return this._layer}})}),c("mi",["m3","m7","ma","mh"],function(a,b,c,d){a.registerKeyword("collision",{onInit:function(a){a.collisions={},a.allCollision={}},onAdd:function(a,b){if(!a.extends(i))throw new Error('To use "collision" keyword, inherit the Grape.Collidable class!');a.collisions[b.name]=b.method},onFinish:function(a){var b=a.allParent,c=a.allCollision,d=b.concat(a),f,g,h;for(f=0;f<d.length;f++)if(h=d[f],h.collisions)for(g in h.collisions)c[g]?c[g].push(h.collisions[g]):c[g]=[h.collisions[g]];for(f in c)c[f]=1===c[f].length?c[f][0]:e(c[f])}});function e(a){var b;return function(){for(b=0;b<a.length;b++)a[b].apply(this,arguments)}}function f(a,b){var c={size:a.length},d,e,f,g,h,i,j,k,l,m,n,o;for(d=a.length-1;d>=0;d--)for(e=a[d],f=e.getBounds(),g=[f.left,f.right,f.top,f.bottom],h=g[0]/b>>0,i=g[1]/b>>0,k=g[2]/b>>0,j=g[3]/b>>0,l=h;i>=l;++l)for(m=k;j>=m;++m)(n=c[o=l+";"+m])?n.push([e,g]):c[o]=[[e,g]];return c}var g=a("CollisionSystem",d,{init:function(a){a=a||{},this.blockSize=a.blockSize||64,this.ClassPartition=function(){},this.TagPartition=function(){}},createStaticPartition:function(a){a.id?this.ClassPartition.prototype[a.id]=f(this._layer._get(a),this.blockSize):this.TagPartition.prototype[a]=f(this._layer._getTag(a),this.blockSize)},removeStaticPartition:function(a){a.id?delete this.ClassPartition.prototype[a.id]:delete this.TagPartition.prototype[a]},"event frame":function(){var a=this._layer._getClasses(i),b=new this.TagPartition,c=new this.ClassPartition,d=[],e,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;for(e in a){h=a[e].clazz.allCollision,k=!1;for(g in h)b[g]?(k=!0,d.push([e,g,h[g]])):(j=this._layer._tags[g],j&&0!==j.length&&(b[g]=f(j,this.blockSize),k=!0,d.push([e,g,h[g]])));k&&!c[e]&&(c[e]=f(a[e].instances,this.blockSize))}for(l=0;l<d.length;l++){p=d[l],q={},r=c[p[0]],s=b[p[1]],t=p[2],(u=r.size>s.size)?(v=r,w=s):(v=s,w=r);for(m in w)if("size"!==m&&v[m])for(x=u?v[m]:w[m],y=u?w[m]:v[m],n=x.length-1;n>=0;--n)for(z=x[n],o=y.length-1;o>=0;--o)A=y[o],z[0]!==A[0]&&(B=z[0].collisionId+"-"+A[0].collisionId,q[B]||(C=z[1],D=A[1],C[1]>D[0]&&D[1]>C[0]&&C[3]>D[2]&&D[3]>C[2]&&(t.call(z[0],A[0]),q[B]=!0)))}}}),h=0,i=a("Collidable",[c,b],{init:function(){this.collisionId=h++},"abstract getBounds":null,"abstract getLeft":null,"abstract getTop":null,"abstract getRight":null,"abstract getBottom":null,"abstract getWidth":null,"abstract getHeight":null});return{Collidable:i,CollisionSystem:g}}),c("mj",["m3","ma","m7"],function(a,b,c){return a("Mouse",[b,c],{isMouseOver:function(){return this._mouseOver},"global-event beforeMouseMove":function(){this._hasMouse=!1},"global-event mouseMoveView":function(a){var b=this.getBounds(),c=a.mouse;c.x>=b.left&&c.x<b.right&&c.y>=b.top&&c.y<b.bottom&&(this._hasMouse=!0,this._mouseOver||(this._mouseOver=!0,this.emit("mouseOver")))},"global-event afterMouseMove":function(){!this._hasMouse&&this._mouseOver&&(this._mouseOver=!1,this.emit("mouseOut"))},"global-event keyPress":{mouseLeft:function(){this._mouseOver&&this.emit("keyPress.mouseLeft")},mouseMiddle:function(){this._mouseOver&&this.emit("keyPress.mouseMiddle")},mouseRight:function(){this._mouseOver&&this.emit("keyPress.mouseRight")}},"global-event keyRelease":{mouseLeft:function(){this._mouseOver&&this.emit("keyRelease.mouseLeft")},mouseMiddle:function(){this._mouseOver&&this.emit("keyRelease.mouseMiddle")},mouseRight:function(){this._mouseOver&&this.emit("keyRelease.mouseRight")}},"global-event keyDown":{mouseLeft:function(){this._mouseOver&&this.emit("keyDown.mouseLeft")},mouseMiddle:function(){this._mouseOver&&this.emit("keyDown.mouseMiddle")},mouseRight:function(){this._mouseOver&&this.emit("keyDown.mouseRight")}},"abstract getBounds":null,"abstract getLeft":null,"abstract getTop":null,"abstract getRight":null,"abstract getBottom":null,"abstract getWidth":null,"abstract getHeight":null})}),c("mk",["m3","mc","ma"],function(a,b,c){return a("Physical",[b,c],{init:function(a){a=a||{},this.speedX=a.speedX||0,this.speedY=a.speedY||0},getSpeed:function(){return Math.sqrt(this.speedX*this.speedX+this.speedY*this.speedY)},setSpeed:function(a){var b=this.getSpeed();return 0!==b?(this.speedX*=a/b,this.speedY*=a/b):this.speedX=a,this},accelerate:function(a){return this.setSpeed(this.getSpeed()+a)},"global-event frame":function(){this.x+=this.speedX,this.y+=this.speedY}})}),c("ml",["m3","md"],function(a,b){return a("Rectangle",b,{init:function(a){a=a||{},this.width=a.width||0,this.height=a.height||0,this.borderWidth=void 0===a.borderWidth?1:a.borderWidth,this.backgroundColor=a.backgroundColor||"#fff",this.borderColor=a.borderColor||"#000"},"override visualize":function(a){a.fillStyle=this.backgroundColor,a.borderStyle=this.borderColor,a.fillRect(this.x,this.y,this.width,this.height)},"override getBounds":function(){return{left:this.x,top:this.y,right:this.x+this.width,bottom:this.y+this.height}},"override getLeft":function(){return this.x},"override getTop":function(){return this.y},"override getRight":function(){return this.x+this.width},"override getBottom":function(){return this.y+this.height},"override getWidth":function(){return this.width},"override getHeight":function(){return this.height}})}),c("mm",["m7","mb","mf","mg","mi","m8","mj","mk","mc","ml","me","m9","md"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{AABB:a,Alarm:b,Animation:c,Collidable:e.Collidable,CollisionSystem:e.CollisionSystem,EventEmitter:f,Mouse:g,Physical:h,Position:i,Rectangle:j,SpriteVisualizer:k,TagContainer:l.TagContainer,Taggable:l.Taggable,Visualizer:m}}),c("mn",["m3","m1","mh","m2"],function(a,b,c,d){function e(a,b){return"function"==typeof a?a(b):parseFloat(a)+""==a+""?1*a:h("p","return "+a.replace(/%/g,"/100*p")+";")(b)}var f={},g=[];function h(a,b){var c=a+";"+b;return f[c]||(g.length>=100&&delete f[g.shift()],f[c]=new Function(a,b),g.push(c)),f[c]}return a("AbstractView",c,{init:function(a){this.width="100%",this.height="100%",this.left=0,this.top=0,this.originX=0,this.originY=0,this.x=0,this.y=0,this.zoom=1,this.alpha=1,d.extend(this,a)},_calculateMouse:function(a){var b=this.mouse.view.x=a.x-this.getLeft(),c=this.mouse.view.y=a.y-this.getTop();this.mouse.x=b+this.x-this.getOriginX(),this.mouse.y=c+this.y-this.getOriginY(),this.mouse.inView=!1,b>=0&&c>=0&&b<this.getWidth()&&c<this.getHeight()&&(this.mouse.inView=!0,a.view=this,this.getLayer().emit("mouseMoveView",this))},"event start":function(a){var c;this._game=a,this.mouse={view:{}},b.browser&&(c=this.el=this.createDom(),c.style.position="absolute",this.updateSize(),this._game.getScreen().appendChild(c),this.emit("domCreated",c)),this._calculateMouse(a.input.mouse)},"event stop":function(){b.browser&&this.el.parentNode.removeChild(this.el)},"event renderLayer":function(){this.el.style.left=this.getLeft()+"px",this.el.style.top=this.getTop()+"px",this.el.style.opacity=this.alpha,this.updateSize()},"event mouseMove":function(a){this._calculateMouse(a)},updateSize:function(){this.el.style.width=this.getWidth()+"px",this.el.style.height=this.getHeight()+"px"},getLeft:function(){return e(this.left,this._game.getScreenWidth())>>0},getTop:function(){return e(this.top,this._game.getScreenHeight())>>0},getWidth:function(){return e(this.width,this._game.getScreenWidth())>>0},getHeight:function(){return e(this.height,this._game.getScreenHeight())>>0},getOriginX:function(){return e(this.originX,this.getWidth())>>0},getOriginY:function(){return e(this.originY,this.getHeight())>>0},"abstract createDom":null})}),c("mo",["m3","m1"],function(a,b){var c=b.node?100:0,d,e,f,g;b.browser&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame,e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelRequestAnimationFrame),d?(f=function(a){var b;function c(){a(),null!==b&&(b=d(c))}return b=d(c),{_stop:function(){b=null,e(b)}}},g=function(a){a._stop()}):(d=function(a){return setTimeout(a,16)},e=function(a){clearTimeout(a)},f=function(a){return setInterval(a,16)},g=function(a){clearInterval(a)});var h=Date.now?Date.now:function(){return(new Date).getTime()};function i(){}return i.prototype=new Error,i.prototype.name="StopFrame",a("GameLoop",{init:function(a){this.intervalId=null,this.game=a,this.insideFrame=!1},start:function(){if(this.isRunning())throw new Error("already running");var a=this.game,b=this,d=0,e=h(),g=e;this.intervalId=f(function(){var f=h(),j=!1;d+=f-e,b.insideFrame=!0;try{while(d>0)d-=1e3/a.getRequiredFps(),j=!0,a.frame(),h()-g>16+c+1e3/a.getRequiredFps()&&(d=0);j&&(e=f,g=h(),a.render())}catch(k){if(!(k instanceof i))throw k}finally{b.insideFrame=!1}})},stop:function(){if(!this.isRunning())throw new Error("not running");if(g(this.intervalId),this.intervalId=null,this.insideFrame)throw new i},isRunning:function(){return null!==this.intervalId}})}),c("mp",["m3","m1","m2"],function(a,b,c){var d={any:"any",none:"none",mouse1:"mouseLeft",mouse2:"mouseMiddle",mouse3:"mouseRight",8:"backspace",9:"tab",12:"clear",13:"enter",16:"lshift",17:"ctrl",18:"alt",19:"pause",20:"rshift",27:"esc",32:"space",33:"pagegup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"windows",93:"contextmenu",106:"*",107:"+",109:"-",110:".",111:"/",144:"numlock",186:"\xe9",187:"\xf3",188:",",189:"/",190:".",191:"\xfc",192:"\xf6",219:"\u0151",220:"\u0171",221:"\xfa",222:"\xe1",226:"\xed"},e={},f,g={x:0,y:0};for(f=65;90>=f;++f)d[f]=String.fromCharCode(f).toLowerCase();for(f=0;9>=f;++f)d[f+48]=f;for(f=0;9>=f;++f)d[f+96]="num"+f;for(f=1;12>=f;++f)d[f+111]="f"+f;for(f in d)e[d[f]]=f;function h(a,b){var c;if("any"===a||"none"===a){for(c in b)return"any"===a;return"none"===a}return b[e[a]]===!0}function i(a,b,c){var e=0;for(var f in b)0===e&&a.emit(c+".any",f),++e,a.emit(c+"."+d[f]);0===e&&a.emit(c+".none")}return b.browser&&c.addEventListener(document,"mousemove",function(a){g.x=a.clientX,g.y=a.clientY}),a("Input",{"static mouse":g,setReservedKeys:function(a){var b={},c,d;for(c=0;c<a.length;c++){if(d=e[a[c]],!d)throw new Error("Key "+a[c]+" does not exist.");b[d]=!0}this._reservedKeys=b},init:function(a){a=a||{},this.downKeys={},this.pressedKeys={},this.releasedKeys={},this.mouse={x:g.x,y:g.y,prevX:g.x,prevY:g.y,screen:g},this.setReservedKeys(a.reservedKeys||[])},_calculateMouse:function(){var a=this._screen.getBoundingClientRect();this.mouse.x=g.x-a.left,this.mouse.y=g.y-a.top,this.mouse.view=null},_start:function(a){var b=this;this._screen=a;function d(a,c){b.downKeys[a]||(b.pressedKeys[a]=!0),b.downKeys[a]=!0,b._reservedKeys[a]&&c.preventDefault()}function e(a){b.downKeys[a]&&(delete b.downKeys[a],b.releasedKeys[a]=!0)}this.onKeyDown=function(a){d(a.which,a)},this.onKeyUp=function(a){e(a.which)},this.onContextMenu=function(b){c.domContains(a,b.target)&&b.preventDefault()},this.onMouseDown=function(b){(a===b.target||c.domContains(a,b.target))&&(d("mouse"+b.which,b),b.preventDefault())},this.onMouseUp=function(a){e("mouse"+a.which)},this._calculateMouse(),c.addEventListener(document,"keydown",this.onKeyDown),c.addEventListener(document,"keyup",this.onKeyUp),c.addEventListener(document,"contextmenu",this.onContextMenu),c.addEventListener(document,"mousedown",this.onMouseDown),c.addEventListener(document,"mouseup",this.onMouseUp)},_stop:function(){c.removeEventListener(document,"keydown",this.onKeyDown),c.removeEventListener(document,"keyup",this.onKeyUp),c.removeEventListener(document,"contextmenu",this.onContextMenu),c.removeEventListener(document,"mousedown",this.onMouseDown),c.removeEventListener(document,"mouseup",this.onMouseUp)},_emitEvents:function(a){i(a,this.pressedKeys,"keyPress"),i(a,this.downKeys,"keyDown"),i(a,this.releasedKeys,"keyRelease"),this._calculateMouse(),(this.mouse.prevX!==this.mouse.x||this.mouse.prevY!==this.mouse.y)&&(a.emit("beforeMouseMove",this.mouse),a.emit("mouseMove",this.mouse),a.emit("afterMouseMove",this.mouse)),this.mouse.prevX=this.mouse.x,this.mouse.prevY=this.mouse.y,this.pressedKeys={},this.releasedKeys={}},resetKeys:function(){this.pressedKeys={},this.releasedKeys={},this.downKeys={}},isPressed:function(a){return h(a,this.pressedKeys)},isReleased:function(a){return h(a,this.releasedKeys)},isDown:function(a){return h(a,this.downKeys)}})}),c("mq",["m3","m4","ma"],function(a,b,c){var d={};function e(a){return function(){for(var b=0,c=this.length;c>b;++b)this[b][a].apply(this[b],arguments);return this}}for(var f in c.methods)d[f]=e(f);return a("GameObjectArray",b,d)}),c("mr",["m3","m8","m9","ma","mq","m2","m5"],function(a,b,c,d,e,f,g){function h(a,b,c){if(void 0===c)c=b,a.push(c);else{if(a[b])throw new Error('Element "'+b+'" already added.');a[b]=c}return c}function i(a,b){if("string"==typeof b){if(!a[b])throw new Error('Element "'+b+'" does not exist.');delete a[b]}else if(!f.removeFromArray(a,b))throw new Error("Element does not exist.")}return a("Layer",[b,c.TagContainer],{init:function(a){a=a||{},this.width=a.widht||400,this.height=a.height||300,this.background=a.background||null,this.backgroundColor=a.backgroundColor||null,this._classes={},this._activeClasses={},this.instanceNumber=0,this._layers=[],this._systems=[],this._parentLayer=null},add:function(a){var b,c,e,f=a.getClass(),h=f.id,i;if(!a.instanceOf(d))throw new Error("The instance must be a descendant of Grape.GameObject.");if(a.setTagContainer(this),a._layer=this,c=this._classes[h])this._activeClasses[h]=c,c.instanceNumber++;else for(this._activeClasses[h]=this._classes[h]=c={id:h,clazz:f,instances:new g,instanceNumber:1,descendants:[]},i=f.allParent,b=i.length;--b>=0;)e=i[b].id,this._classes[e]?this._classes[e].descendants.push(c):this._classes[e]={id:e,clazz:i[b],instances:new g,instanceNumber:0,descendants:[c]};return this.instanceNumber++,a._index=c.instances.add(a)-1,a.emit("add",this),a},remove:function(a){var b=a.getClass(),c=b.id,d=this._classes[c],e=this._activeClasses[c].instances,f=a._index,g=e.remove(f);g&&(g._index=f),d.instanceNumber-=1,0===d.instanceNumber&&delete this._activeClasses[c],this.instanceNumber--,a.removeTagContainer(),a.emit("remove")},getByTag:function(){return this.parent(c.TagContainer,"get").apply(this,arguments)},"override createResultContainer":function(){return new e},_getClasses:function(a){var b={},c=this._classes[a.id],d,e;if(c)for(this._activeClasses[c.id]&&(b[c.id]=c),d=0;d<c.descendants.length;d++)e=c.descendants[d],this._activeClasses[e.id]&&(b[e.id]=e);return b},_get:function(a){var b=this._activeClasses[a.id];return b?b.instances:[]},get:function(a,b){var c,d,g,h,i=[],j={},k=new e;function l(a){if(!j[a.id])for(j[a.id]=!0,g=a.instances,c=g.length;c-->0;)k.push(g[c])}if(a)for(f.isArray(a)||(a=[a]),c=0;c<a.length;c++)h=this._classes[a[c].id],h&&i.push(h);else for(c in this._activeClasses)i.push(this._activeClasses[c]);for(c=0;c<i.length;c++)if(h=i[c],l(h),b)for(b=h.descendants,d=0;d<b.length;d++)l(b[d]);return k},addLayer:function(a,b){b=h(this._layers,a,b),b._parentLayer=this},addSystem:function(a,b){b=h(this._systems,a,b),b._layer=this,this._started&&b.emit("start")},addView:function(a,b){this.addSystem(a,b)},removeLayer:function(a){i(this._layers,a)},removeSystem:function(a){a=i(this._systems,a),this._started&&a.emit("stop")},removeView:function(a){this.removeSystem(a)},getSystem:function(a){return this._systems[a]},getScene:function(){return this._parentLayer?this._parentLayer.getScene():this},getGame:function(){return this.getScene()._game},"event start":function(){this._started=!0},"event render":function(a){if(this.backgroundColor&&(a.fillStyle=this.backgroundColor,a.fillRect(0,0,this.width,this.height)),this.background){var b=a.createPattern(this.background.img,"repeat");a.rect(0,0,this.width,this.height),a.fillStyle=b,a.fill(),a.fillStyle=""}},"event any":function(a,b){var c;for(c in this._layers)this._layers[c].emit(a,b);for(c in this._systems)this._systems[c].emit(a,b)}})}),c("ms",["m3","m1","mn"],function(a,b,c){return a("View",c,{"override createDom":function(){var a=document.createElement("canvas");return this.ctx=a.getContext("2d"),this.ctx.view=this,a},"event renderLayer":function(){this.ctx.clearRect(0,0,this.el.width,this.el.height),this.ctx.translate(-this.x+this.getOriginX(),-this.y+this.getOriginY()),this._layer.emit("render",this.ctx)
},"override updateSize":function(){this.el.width=this.getWidth(),this.el.height=this.getHeight()}})}),c("mt",["m3","mr","ms"],function(a,b,c){return a("Scene",b,{init:function(){this._started=!1,this.fps=30,this.initViews()},initViews:function(){this.addView("view",new c)}})}),c("mu",["m3","m1","m8","mo","mp","mt"],function(a,b,c,d,e,f){return a("Game",c,{init:function(a){a=a||{},this.initialScene=a.initialScene||f,a.hasOwnProperty("container")?this.container=a.container:b.browser&&(this.container=document.body),this.gameLoop=this.createGameLoop(),b.browser&&(this.input=new e({reservedKeys:a.reservedKeys}))},createGameLoop:function(){return new d(this)},"final start":function(a){if(this.gameLoop.isRunning())throw new Error("already running");if(b.browser){if("string"==typeof this.container&&(this.container=document.getElementById(this.container)),!this.container)throw new Error("Container does not exists!");this.container.innerHTML="",this._screen=document.createElement("div"),this._screen.style.position="relative",this._screen.style.float="left",this._screen.style.width="100%",this._screen.style.height="100%",this._screen.style.overflow="hidden",this.container.appendChild(this._screen)}this._starting=!0,this.input&&this.input._start(this._screen),a=a||this.initialScene,this.startScene("function"==typeof a?new a:a),this._starting=!1,this.gameLoop.start()},"final stop":function(){this.gameLoop.stop(),this.input&&this.input._stop(),this.emit("stop")},startScene:function(a){if(!this._starting&&!this.gameLoop.isRunning())throw new Error("Game is not running! You can game.start(scene).");if(a._game)throw new Error("Scene already started!");this.scene&&(this.scene.emit("stop"),this.scene._game=null),a._game=this,this.scene=a,a.emit("start",this)},frame:function(){this.emit("frame"),this.scene.emit("frame"),this.input&&this.input._emitEvents(this.scene)},render:function(){b.browser&&this.scene.emit("renderLayer")},getScreen:function(){return this._screen},getScreenWidth:function(){return this._screen?this._screen.offsetWidth:1},getScreenHeight:function(){return this._screen?this._screen.offsetHeight:1},setCursor:function(a){this._screen&&(this._screen.style.cursor=a)},getScene:function(){return this.scene},getRequiredFps:function(){return this.scene.fps}})}),c("mv",["m3","mn"],function(a,b){return a("GUIView",b,{createDom:function(){return document.createElement("div")}})}),c("mw",["mn","mu","mo","ma","mq","mv","mp","mr","mt","mh","ms"],function(a,b,c,d,e,f,g,h,i,j,k){return{AbstractView:a,Game:b,GameLoop:c,GameObject:d,GameObjectArray:e,GUIView:f,Input:g,Layer:h,Scene:i,System:j,View:k}}),c("mx",["m3","m8"],function(a,b){return a("Resource",b,{getEstimatedTime:function(){return 1},"abstract load":null})}),c("my",["m3","mx"],function(a,b){var c={};return a("Cacheable",b,{"final override load":function(a,b,d){var e=this.getResourceKey(),f=this;c[e]?(this.processed||(this.process(c[e]),this.processed=!0),a()):this.loadResource(function(b){c[e]=b,f.process(b),f.processed=!0,a()},b,d)},"abstract getResourceKey":null,"abstract loadResource":null,"abstract process":null})}),c("mz",["m3","m1","my","m2"],function(a,b,c,d){var e={volume:100},f="function"==typeof webkitAudioContext?new webkitAudioContext:null,g=function(){var a,b,c,d,e,f,g;if("function"==typeof Audio){for(a=["mp3","wav","ogg"],b=["audio/mpeg",'audio/wav; codecs="1"','audio/ogg; codecs="vorbis"'],f=new Audio,e={},c=0,d=a.length;d>c;++c)g=f.canPlayType(b[c]),("maybe"===g||"probably"===g)&&(e[a[c]]=!0);return e}return{}}();function h(){var a=window.location.pathname;return"file://"+a.substr(0,a.length-10)}return a("Audio",c,{init:function(a,b,c,d){var e=null,f,h;for("string"==typeof a&&(d=c,c=b,b=a,a={}),f=[b,c,d],h=0;h<f.length;++h)if(f[h]&&g[f[h].substring(f[h].length-3)]){e=f[h];break}this.url=e},"override loadResource":function(a,c){if(b.node)a(null);else if("file:"!==location.protocol&&"function"==typeof Blob)d.ajax(this.url,{responseType:"arraybuffer"},function(b){if(f&&"undefined"==typeof intel)f.decodeAudioData(b,function(b){a(b)});else{var c=new Blob([b],{type:"audio"});a({url:URL.createObjectURL(c),blob:c})}},function(){c()});else if("function"==typeof Audio&&"undefined"==typeof Cordova){var e=new Audio;e.src=this.url,e.addEventListener("canplaythrough",function(){var b=[];b.next=0;for(var c=0;8>c;++c)b[c]=e.cloneNode(!1);a(b)},!1),e.load()}else a("function"==typeof Media?"cordova":null)},"override getResourceKey":function(){return this.url},"override process":function(a){this.buffer=a},play:function(a){var b,c;if(void 0===this.buffer)throw new Error("Audio is not loaded yet.");a=a||e,null===this.buffer||("object"==typeof this.buffer&&this.buffer.url?(c=new Audio(this.buffer.url),c.play()):f&&this.buffer instanceof AudioBuffer?(b=f.createBufferSource(),b.buffer=this.buffer,b.connect(f.destination),b.noteOn(0)):"function"==typeof Audio&&"undefined"==typeof Cordova&&this.buffer instanceof Array?(c=this.buffer[this.buffer.next++],this.buffer.next===this.buffer.length&&(this.buffer.next=0),c.play()):"undefined"!=typeof Media&&(b=h()+this.url,c=new Media(b,function(){c.release()},function(){}),c.play()))}})}),c("m10",["m3","mt","my","m2"],function(a,b,c,d){return a("JSONSceneSource",c,{init:function(a,c){c=c||{},this.url=a,this.typeMapping=c.typeMapping||{},this.type=c.type||b,this.data=null},"override loadResource":function(a,b){d.ajax(this.url,function(b){a(d.parseJSON(b))},function(){b()})},"override getResourceKey":function(){return this.url},"override process":function(a){this.data=a},create:function(){var a,b,c,d,e,f,g,h,i,j,k;if(null===this.data)throw new Error("Scene not loaded yet.");if(k=this.data.instances?this.data.instances.slice(0):[],c=new this.type,i=this.data.cellWidth||1,j=this.data.cellHeight||1,this.data.attributes)for(a in this.data.attributes)c[a]=this.data.attributes[a];if(this.data.matrix)for(a=0;a<this.data.matrix.length;a++)for(d=this.data.matrix[a],b=0;b<d.length;b++)k.push([d[b],b*i,a*j]);for(a=0;a<k.length;a++)if(e=k[a],e.type?(h="type",g=e.data):(h="0",g={x:e[1],y:e[2]}),f=this.typeMapping[e[h]],null!==f){if(!f)throw new Error('Type "'+e[h]+'" is not registered in the type mapping.');c.add(new f(g))}return c}})}),c("m11",["m3","m1","my"],function(b,c,d){function e(a){var b,c,d,e;return b=a[a.pos++]<<24,c=a[a.pos++]<<16,d=a[a.pos++]<<8,e=a[a.pos++],b|c|d|e}function f(a){var b,c,d;for(d=[],b=c=0;4>c;b=++c)d.push(String.fromCharCode(a[a.pos++]));return d.join("")}function g(a){var b,c;a.pos=8;while(a.pos<a.length){if(b=e(a),c=f(a),"IHDR"===c)return{width:e(a),height:e(a)};a.pos+=b}throw new Error("Failed to determine image size")}return b("Sprite",d,{init:function(a,b){b=b||{},this.left=b.left||0,this.top=b.top||0,this.leftBounding=b.leftBounding||0,this.topBounding=b.topBounding||0,this.originX=b.originX||0,this.originY=b.originY||0,this.url=a,this.subimages=b.subimages||1,this.width=b.width,this.height=b.height,this.rightBounding=b.rightBounding,this.bottomBounding=b.bottomBounding},"override loadResource":function(b,d){if(c.node){var e=a("fs");e.readFile(this.url,function(a,c){a?d():b(g(c))})}else{var f=document.createElement("img");f.onload=function(){b(f)},f.onerror=function(){d()},f.src=this.url}},"override getResourceKey":function(){return this.url},"override process":function(a){this.img=a,void 0===this.width&&(this.width=a.width/this.subimages),void 0===this.height&&(this.height=a.height),void 0===this.rightBounding&&(this.rightBounding=this.width),void 0===this.bottomBounding&&(this.bottomBounding=this.height)}})}),c("m12",["m3","mz","m10","mx","m11"],function(a,b,c,d,e){function f(){}return a("ResourceCollection",d,{init:function(a){a=a||{},this.prefix=a.prefix||"",this.resources=[],this.resourcesByName={}},add:function(a,b){if(b||(b=a,a=null),null!==a){if(this.resourcesByName[a])throw new Error('resource with name "'+a+'" already exists.');this.resourcesByName[a]=b}this.resources.push(b)},get:function(a){if(!this.resourcesByName[a])throw new Error('Resource "'+a+'" not found');return this.resourcesByName[a]},"override load":function(a,b,c){var d,e,g=[],h=[],i=0,j,k=!1,l=this.resources.length;for(a=a||f,b=b||f,c=c||f,d=0;d<this.resources.length;d++)e=this.resources[d].getEstimatedTime(),h[d]=g[d]=e,i+=e;j=i;function m(b){return function(){l--,h[b]>0&&(j-=h[b],h[b]=0,c(100*(1-j/i))),0===l&&a()}}function n(a){return function(b){var d=g[a]*(1-b/100);h[a]!==d&&(j-=[h[a]-d],h[a]=d,c(100*(1-j/i)))}}for(0===this.resources.length&&a(),d=0;d<this.resources.length;d++)this.resources[d].load(m(d),function(){k||(b(),k=!0)},n(d))},"override getEstimatedTime":function(){var a,b=0;for(a=0;a<this.resources.length;a++)b+=this.resources[a].getEstimatedTime();return b},sprite:function(a,b,c){var d=new e(this.prefix+b,c);return this.add(a,d),d},tile:function(a,b,c,d){var e,f,g={};for(e in d)f=d[e],g[e]=this.sprite(e,this.prefix+a,{subimages:2===f.length?1:f[2],left:f[0]*b,top:f[1]*c,width:b,height:c});return g},audio:function(a,c,d,e,f){"string"==typeof c&&(f=e?this.prefix+e:e,e=d?this.prefix+d:d,d=c?this.prefix+c:c,c={});var g=new b(c,d,e,f);return this.add(a,g),g},scene:function(a,b,d){var e=new c(this.prefix+b,d);return this.add(a,e),e}})}),c("m13",["mz","my","m10","mx","m12","m11"],function(a,b,c,d,e,f){return{Audio:a,Cacheable:b,JSONSceneSource:c,Resource:d,ResourceCollection:e,Sprite:f}}),c("m14",["m3","m6","m1","mm","mw","m13","m2"],function(a,b,c,d,e,f,g){var h={};return h.Class=a,h.Env=c,h.Utils=g,h.Object=h.Class(),g.extend(h,b),g.extend(h,d),g.extend(h,e),g.extend(h,f),h.version="1.0.0",h}),b("m14")});
//# sourceMappingURL=grape.min.map